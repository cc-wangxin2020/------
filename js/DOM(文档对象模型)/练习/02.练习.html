<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        window.onload = function() {
            const hobby = document.getElementsByName('hobby')
            const all = document.getElementById('all')
            const no = document.getElementById('no')
            const reverse = document.getElementById('reverse')
            const send = document.getElementById('send')
            const checkAll = document.getElementById('check-all')
            console.log(reverse);
            // 全选
            all.addEventListener('click', function() {
                    for (let i = 0; i < hobby.length; i++) {
                        hobby[i].checked = true
                    }
                    checkAll.checked = true
                })
                // 取消
            no.addEventListener('click', function() {
                    for (let i = 0; i < hobby.length; i++) {
                        hobby[i].checked = false
                    }
                    checkAll.checked = false
                })
                // 反选
            reverse.addEventListener('click', function() {
                    // console.log('反选');
                    for (let i = 0; i < hobby.length; i++) {
                        // hobby[i].checked = (hobby[i].checked == true) ? false : true
                        hobby[i].checked = !hobby[i].checked
                    }
                    const checkbox = document.querySelectorAll('[name=hobby]:checked')
                    if (checkbox.length == hobby.length) {
                        checkAll.checked = true
                    } else {
                        checkAll.checked = false
                    }
                })
                // 提交
            send.addEventListener('click', function() {
                    let str = ''
                    for (let i = 0; i < hobby.length; i++) {
                        if (hobby[i].checked) {
                            str += (hobby[i].textContent + ' ')
                        }
                        // hobby[i].checked && str == hobby[i].value + str
                    }
                    alert(str)
                })
                // 小checkbox 和 大checkbox同步问题
            checkAll.addEventListener('change', function() {
                // 在事件的响应函数中，响应函数绑定给谁，this就指向谁（箭头函数除外）
                for (let i = 0; i < hobby.length; i++) {
                    hobby[i].checked = this.checked
                }
            })
            for (let i = 0; i < hobby.length; i++) {
                hobby[i].onchange = function() {
                    // 判断hobbies是否全选
                    const checkbox = document.querySelectorAll("[name = hobby]:checked")
                    console.log(checkbox);
                    if (checkbox.length == hobby.length) {
                        checkAll.checked = true
                    } else {
                        checkAll.checked = false
                    }
                }
            }
        }
    </script>
</head>

<body>
    <div>
        <form action="#">
            <div>
                请选择你的爱好：
                <input type="checkbox" id="check-all" />全选
            </div>
            <div>
                <input type="checkbox" name="hobby" value="乒乓球">乒乓球
                <input type="checkbox" name="hobby" value="篮球">篮球
                <input type="checkbox" name="hobby" value="羽毛球">羽毛球
                <input type="checkbox" name="hobby" value="足球">足球
            </div>
            <div>
                <button type="button" id="all">全选</button>
                <button type="button" id="no">取消</button>
                <button type="button" id="reverse">反选</button>
                <button type="button" id="send">提交</button>
            </div>
        </form>
    </div>
</body>

</html>